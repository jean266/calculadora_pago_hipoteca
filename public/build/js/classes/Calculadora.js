import UI from"./UI.js";const ui=new UI,mistakes={empty:[],checked:!1};export default class Calculadora{constructor(){}sendForm(){const e=document.querySelector(".calculate_form-btn");e.addEventListener("click",(e=>{"INPUT"===e.target.tagName&&e.preventDefault(),this.validarForm(),0!==mistakes.empty.length||mistakes.checked||this.getResult()})),e.addEventListener("keypress",(e=>{"Enter"===e.key&&("INPUT"===e.target.tagName&&e.preventDefault(),this.validarForm(),0!==mistakes.empty.length||mistakes.checked||this.getResult())}))}funtionsCal(){const e=document.querySelectorAll(".inputs_radio"),t=document.querySelectorAll(".calculate_form-input > input");document.querySelector("#clear-all").addEventListener("click",(e=>{ui.clearAll()})),ui.formatAmount(),t.forEach((e=>{e.addEventListener("focus",(e=>{ui.focusInputs(e.target)})),e.addEventListener("focusout",(e=>{ui.clearFocus(e.target.parentElement)}))})),e.forEach((e=>{e.addEventListener("click",(()=>{ui.focusRadio(e),ui.clearAlert(e.parentElement,"radio"),mistakes.checked&&(mistakes.checked=!1)})),e.addEventListener("keypress",(t=>{"Enter"===t.key&&(ui.focusRadio(e),ui.clearAlert(e.parentElement,"radio"),e.firstElementChild.firstElementChild.checked=!0,mistakes.checked&&(mistakes.checked=!1))}))}))}validarForm(){const e=document.querySelectorAll(".calculate_form-input > input");this.validateRadio(),e.forEach((e=>{if(e.addEventListener("keypress",(t=>{if(ui.clearAlert(e.parentElement),mistakes.empty.includes(t.target.name)){let e=mistakes.empty.filter((e=>e!==t.target.name));mistakes.empty=e}})),""===e.value){let t="This filed is requeried";const r=ui.printAlert(t,e);mistakes.empty.includes(e.name)||mistakes.empty.push(r)}}))}validateRadio(){const e=document.querySelectorAll("input[type=radio]");if(!e[0].checked&&!e[1].checked){let t="This field is requeried";ui.printAlert(t,e[0].parentElement.parentElement,"radio"),mistakes.checked=!0}}getResult(){const e=document.querySelector("#amount").value,t=document.querySelector("#term").value,r=document.querySelector("#interest").value,a=document.querySelectorAll("input[type=radio]");let i,s,l,c,n,o=e.split(",");o=o.join(""),c=r/12,n=12*t;for(const e of a)e.checked&&(i=e.value);s=o*(Math.pow(1+c/100,n)*c/100)/(Math.pow(1+c/100,n)-1),l=s*n,l=Number(l.toFixed(2)),s=Number(s.toFixed(2)),"1"===i?(l=ui.formatMoney(l),s=ui.formatMoney(s),ui.showResult(s,l)):"2"===i&&(l-=o,s=l/n,l=ui.formatMoney(l),s=ui.formatMoney(s),ui.showResult(s,l))}}